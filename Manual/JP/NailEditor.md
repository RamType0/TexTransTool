# NailEditor について

## このコンポーネントの概要

このコンポーネントは、非破壊的にネイルの差し替えや編集を容易に行うためのコンポーネントで、元のUVを見なくても、一度設定すれば簡単にネイルを差し替えれるコンポーネントです。

## 使い方

### 始めに

TexTransTool/Runtime/Decal にある NailEditor.cs から、
またはインスペクターのコンポーネントを追加の TexTransTool/NailEditor から
ゲームオブジェクトに追加できます。

### ネイルの貼り方

- TargetAvatarにネイルを貼りたいアバターのAnimatorコンポーネントをセット
- 体のメッシュをTargetRendererにセット
- LeftHand,RightHandのDecalTextureに入れたいネイルのテクスチャをセット
- 適宜爪に合うように、オフセットや回転サイズを調整。

Preview ボタンを押すとそのネイルをプレビューすることができます。

このNailEditorは[AtlasTexture](AtlasTexture.md)と同じように、初回のPreviewが非常に遅く、フリーズする場合もあります。

## プロパティ

### TargetAvatar

指の位置を取得するためのアニメーターを指定するプロパティです。

ヒューマノイド以外のアニメーターを入れた場合の動作は未確認です。

### TargetRenderer

ターゲットとなるレンダラーをセットするプロパティ。ネイルなので手を含めメッシュである体を指定することが多いです。

### Multi Renderer Mode

複数レンダラーにまたがるデカールを貼れるようにするプロパティ。体が複数に分かれている場合に使いましょう。

### BlendType

ネイルを合成するときの合成モードを選択するプロパティです。[詳細](BlendType.md)

ネイルの場合すべてのブレンドモードを一括で変更してしまうため取り扱いにご注意ください。

### TargetPropertyName

ネイルを張るテクスチャーをマテリアルのどのプロパティのテクスチャーにするかを選択するプロパティです。

### UseTextureAspect

下記 ScaleOffset の値を一部無視して、テクスチャーのアスペクトを優先する設定です。

### LeftHand , RightHand

ネイルの細かい設定です。

#### FingerUpVector

モデルによって ZMinus が上だったりといろいろあるのですが、そのアバターの出力元のソフトウェアだったりさまざまに依存して決まっているため、アバターごとに調べて設定しましょう。

#### Thumb , Index , Middle , Ring , Little
それぞれ　左から　親指、人差し指、中指、薬指、小指となっていて、それぞれの細かい調整用です。

##### Decal Texture

その指のネイルの画像を設定するプロパティです。

##### Position Offset , Scale Offset , Rotation Offset

それぞれ　位置、大きさ、回転、のオフセットで、必要に応じて適宜調整しましょう。

この時ギズモの白いラインが爪を通っていない場合、正しく張られないことがあるのでご注意ください。

### Copy

右手から左手に、左手から右手にオフセット設定をコピーできるボタンです。

### SaveData

Create/TexTransTool/NailOffsetData から生成できるスクリプタブルオブジェクトに設定を保存したり、読み込んだりできます。

同じアバターで別のNailEditorに設定を移すときやバックアップなどに使うことを想定しています。